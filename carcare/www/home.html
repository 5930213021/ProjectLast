<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <title>MCarcare</title>

  <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
  <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">

  <link href="https://fonts.googleapis.com/css?family=Archivo+Black&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Bai+Jamjuree|Lato&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Athiti:300,400,500|Sarabun:200&display=swap" rel="stylesheet">

  <link rel="stylesheet" type="text/css" href="css/home.css">


  <link rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/material-design-iconic-font/2.2.0/css/material-design-iconic-font.min.css">

  <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
    crossorigin="anonymous"></script>
  <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
  <script src="js/ejs.js"></script>
  <script src="cordova.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>

  <script>
        // Initialize Firebase
  </script>

</head>

<body>
  <ons-navigator id="myNavigator" swipeable swipe-target-width="80px">
    <ons-page>
      <ons-splitter id="appSplitter" page="booking.html">
        <ons-splitter-side id="sidemenu" page="sidemenu.html" swipeable side="right" collapse="" width="260px">
        </ons-splitter-side>
        <ons-splitter-content page="tabbar.html"></ons-splitter-content>
      </ons-splitter>
    </ons-page>

    <ons-modal direction="up">
      <div style="text-align: center">
        <p>
          <ons-icon icon="md-spinner" size="28px" spin></ons-icon> Loading...
        </p>
      </div>
    </ons-modal>

  </ons-navigator>

  <template id="tabbar.html">
    <ons-page id="tabbar-page">
      <ons-toolbar id="headbar">
        <div class="center" id="appname">Mcarcare</div>
        <div class="right">
          <ons-toolbar-button onclick="fn.toggleMenu()">
            <ons-icon icon="ion-navicon, material:md-menu" style="color: rgb(1, 100, 117);"></ons-icon>
            <!-- <ons-icon class="toolbaricon" size="25px" icon="md-help" style="margin-right:10px;">
                </ons-icon> -->
          </ons-toolbar-button>
        </div>
      </ons-toolbar>

      <ons-tabbar swipeable position="auto" id="appTabbar">
        <ons-tab page="home.html" label="หน้าหลัก" icon="ion-home, material:md-home" badge="1" active></ons-tab>
        <ons-tab page="booking.html" label="จองคิว" icon="fa-car" active-icon="fa-car" onclick="book()"></ons-tab>
        <ons-tab page="message.html" label="ข้อความ" icon="fa-envelope" badge="1"></ons-tab>
        <ons-tab page="history.html" label="ประวัติฯ" icon="fa-list-ul"></ons-tab>
      </ons-tabbar>

      <!-- <script>
        ons.getScriptPage().addEventListener('prechange', function (event) {
            if (event.target.matches('#appTabbar')) {
                event.currentTarget.querySelector('ons-toolbar .center').innerHTML = event.tabItem.getAttribute('label');
            }
        });
    </script> -->
    </ons-page>
  </template>

  <template id="sidemenu.html">
    <ons-page>
      <!-- <div class="profile-pic">
            <img src="img/picpro3.gif">
        </div> -->

      <ons-list-title><br></ons-list-title>
      <!-- เมนู -->
      <ons-list>
        <ons-list-item onclick="window.location.href='profile2.html'">
          <div class="left">
            <ons-icon fixed-width class="list-item__icon" icon="ion-account, material:md-account"></ons-icon>
          </div>
          <div class="center">ข้อมูลส่วนตัว
          </div>
        </ons-list-item>

        <ons-list-item onclick="fn.loadView(0)">
          <div class="left">
            <ons-icon fixed-width class="list-item__icon" icon="ion-home, material:md-home"></ons-icon>
          </div>
          <div class="center">หน้าหลัก</div>
          <!-- <div class="right">
                    <ons-icon icon="fa-link"></ons-icon>
                </div> -->
        </ons-list-item>
        <ons-list-item onclick="fn.loadView(1)">
          <div class="left">
            <ons-icon fixed-width class="list-item__icon" icon="ion-car, material:md-car"></ons-icon>
          </div>
          <div class="center">จองคิว</div>
        </ons-list-item>
        <ons-list-item onclick="fn.loadView(2)">
          <div class="left">
            <ons-icon fixed-width class="list-item__icon" icon="ion-envelope, material:md-email">
            </ons-icon>
          </div>
          <div class="center">ช้อความ</div>
        </ons-list-item>
        <ons-list-item onclick="fn.loadView(3)">
          <div class="left">
            <ons-icon fixed-width class="list-item__icon" icon="ion-view-headline, material:md-view-headline">
            </ons-icon>
          </div>
          <div class="center">ประวัติการใช้งาน</div>
        </ons-list-item>

        <ons-list-item onclick="showModal()">
          <div class="left">
            <ons-icon fixed-width class="list-item__icon" icon="ion-power, material:md-power""></ons-icon>
                </div>
                <div class=" center">ออกจากระบบ
          </div>
        </ons-list-item>
      </ons-list>

    </ons-page>
  </template>


  <!-- <template id="home.html">
    <ons-page><br>
      <ons-list modifier="inset">
        <ons-list-item expandable>
          คู่มือการใช้งาน
          <div class="expandable-content">ผู้ใช้ต้องทำการกรอกข้อมูลส่วนตัวและแก้ไขได้ คุณสามารถทำรายการจองเวลาเลือกการล้างที่คุณต้องการ
          </div>
        </ons-list-item>
      </ons-list>
    </ons-page>
  </template> -->

  <template id="home.html">
    <ons-page><br>
      <ons-list modifier="inset">
        <ons-list-item expandable>
          คู่มือการใช้งาน
          <div class="expandable-content">ผู้ใช้ต้องทำการกรอกข้อมูลส่วนตัวและแก้ไขได้
            คุณสามารถทำรายการจองเวลาเลือกการล้างที่คุณต้องการ </div>
        </ons-list-item>
      </ons-list>

      <div style="height: 200px; padding: 1px 0 0 0;">
        <div class="card">
          <div class="list-item">
            <div class="list-item__left">
              <img class="list-item__thumbnail" src="img/mirage-1284.jpg" alt="Cute kitten">
            </div>

            <div class="list-item__center">
              <div class="list-item__title">วันจันทร์ 14 ก.พ. 2562 (11.00-12.00)</div>
              <div class="list-item__subtitle">ล้างห้องเครื่อง</div>

            </div>
          </div>
        </div>
      </div>
    </ons-page>
  </template>

  <template id="booking.html">
    <ons-page id="page1">
      <section>
        <p id="book">
          เวลาจอง
        </p>
      </section>
      <!-- <ons-list modifier="inset">
        <ons-list-header>8.00 - 9.30</ons-list-header>
        <ons-list-item>
          <button class="button--cta" id="set1" style="width: 50%; margin: 0 auto;">ไม่ว่าง</button>
          <button class="button--cta" id="set2" style="width: 50%; margin: 0 auto;">ว่าง</button>
        </ons-list-item>
      </ons-list><br> -->
      <div class="row" id="data2">
        default

      </div>


      <!-- <ons-list modifier="inset">
        <ons-list-header>7.30 - 8.00</ons-list-header>
        <ons-list-item>
          <button class="button--cta" disabled id="set1" style="width: 100%; margin: 0 auto;">ไม่ว่าง</button>
        </ons-list-item>
      </ons-list><br>

      <ons-list modifier="inset">
        <ons-list-header>8.00 - 9.30</ons-list-header>
        <ons-list-item>
          <button class="button--cta" id="set2" onclick="" style="width: 100%; margin: 0 auto;">ว่าง</button>
        </ons-list-item>
      </ons-list><br>
      <ons-list modifier="inset">
        <ons-list-header>9.30 - 11.00</ons-list-header>
        <ons-list-item>
          <button class="button--cta" id="set2" style="width: 100%; margin: 0 auto;">ว่าง</button>
        </ons-list-item>
      </ons-list><br> -->


    </ons-page>
  </template>

  <template id="message.html">
    <ons-page><br>
      <div class="card" id="bor">
        <h3 class="card__title">วันจันทร์ 14 ก.พ. 2562</h3>
        <div class="card__content">รถของท่านได้ทำการล้างเสร็จเรียบร้อยแล้ว ท่านสามารถเข้ามารับรถได้เลยค่ะ</div>
      </div>
    </ons-page>
  </template>

  <template id="history.html">
    <ons-page><br>
      <!-- <div style="height: 200px; padding: 1px 0 0 0;">
        <div class="card">
            <div class="list-item__left list-item--material__left">
                <img class="list-item__thumbnail list-item--material__thumbnail" src="https://placekitten.com/g/42/41" alt="Cute kitten">
              </div>
          <div class="card__content">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
            incididunt ut labore et dolore magna aliqua.</div>
        </div>
      </div> -->
      <div style="height: 200px; padding: 1px 0 0 0;">
        <div class="card">
          <div class="list-item">
            <div class="list-item__left">
              <img class="list-item__thumbnail" src="img/mirage-1284.jpg" alt="Cute kitten">
            </div>

            <div class="list-item__center">
              <div class="list-item__title">วันจันทร์ 14 ก.พ. 2562</div>
              <div class="list-item__subtitle">ล้างอัดฉีดช่วงล้าง <br>
                ล้างสีดูดฝุ่น</div>
            </div>
          </div>
        </div>
      </div>


    </ons-page>
  </template>

  <!-- <template id="select_type.html">
    <ons-page>
        <div class="background"></div>
        <p>
          <ons-button onclick="window.location.href='homeaddmin.html'" modifier="quiet" id="btnback">
            <ons-icon icon="md-chevron-left"></ons-icon>
            กลับ
          </ons-button>
        </p>
        <div class="namedata">รายละเอียดข้อมูล</div>
        <div class="picuser">
          <ons-list-item>
            <div class="center">
              <img class="list-item__thumbnail" src="img/mirage-1284.jpg" id="pic">
            </div>
          </ons-list-item>
        </div>

        <ons-card>
          <div class="title">ชื่อ :
            <ons-input id="snap" placeholder="ส้มดี"></ons-input>
          </div>
          <div class="title">เบอร์โทรฯ :
            <ons-input id="snap" type="number" placeholder="xxx-xxxxxxx"></ons-input>
          </div>
          <div class="title">ป้ายทะเบียน :
            <ons-input id="snap" placeholder="กข ภูเก็ต 2541"></ons-input>
          </div>
          <div class="title">ประเภทรถ :
            <ons-input id="snap" placeholder="กข ภูเก็ต 2541"></ons-input>
          </div>
          <div class="title">สีรถ :
            <ons-input id="snap" placeholder="กข ภูเก็ต 2541"></ons-input>
          </div>
          <div class="title">รายการลูกค้า :
            <ons-input id="snap" placeholder="กข ภูเก็ต 2541"></ons-input>
          </div>
        </ons-card>

        <ons-row style="margin-top: 15px;">
          <ons-col style="flex: 0 0 70%;margin: auto;max-width: 70%;">
            <label class="radio-button radio-button--material" style="margin-left: 30px;">
              <input type="radio" class="radio-button__input radio-button--material__input" name="r" checked="checked">
              <div class="radio-button__checkmark radio-button--material__checkmark"></div>
              ขนาดเล็ก
            </label>
            <label class="radio-button radio-button--material" style="margin-left: 30px;">
              <input type="radio" class="radio-button__input radio-button--material__input" name="r">
              <div class="radio-button__checkmark radio-button--material__checkmark"></div>
              ขนาดใหญ่
            </label>
          </ons-col>
        </ons-row>

        <div class="setbtn">
          <ons-button onclick="" id="btnpass">
            เลื่อนเวลา
          </ons-button>
          <ons-button onclick="alertsubmit()" id="btnsubmit">
            ยืนยัน
          </ons-button>
          <ons-button onclick="window.location.href='....'" id="btncancle">
            ยกเลิก
          </ons-button>
        </div>
    </ons-page>
  </template> -->

  <template id="detailState.html">
    <ons-page id="page2">
      <div class="background"></div>
      <p>
        <ons-button onclick="window.location.href='home.html'" modifier="quiet" id="btnback">
          <ons-icon icon="md-chevron-left"></ons-icon>
          กลับ
        </ons-button>
      </p>
      <div class="namedata">รายละเอียดข้อมูล</div>
      <div class="picuser">
        <ons-list-item>
          <div class="center">
            <img class="list-item__thumbnail" src="img/mirage-1284.jpg" id="pic">
          </div>
        </ons-list-item>
      </div>

      <ons-card>
        <div class="title">ชื่อ :
          <ons-input id="snap" placeholder="ส้มดี"></ons-input>
        </div>
        <div class="title">เบอร์โทรฯ :
          <ons-input id="snap" type="number" placeholder="099-7654321"></ons-input>
        </div>
        <div class="title">ป้ายทะเบียน :
          <ons-input id="snap" placeholder="กข ภูเก็ต 2541"></ons-input>
        </div>
        <div class="title">ประเภทรถ :
          <ons-input id="snap" placeholder="เก๋ง"></ons-input>
        </div>
        <div class="title">สีรถ :
          <ons-input id="snap" placeholder="แดง"></ons-input>
        </div>
      </ons-card>

      <div class="namedata">เลือกประเภทการล้าง</div>

      <ons-row style="margin-top: 15px;">
        <ons-col style="flex: 0 0 70%;margin: auto;max-width: 100%;margin-bottom: 10px;">
          <label class="radio-button radio-button--material" style="margin-left: 30px;">
            <input type="radio" class="radio-button__input radio-button--material__input" name="r" checked="checked">
            <div class="radio-button__checkmark radio-button--material__checkmark"></div>
            ล้างห้องเครื่อง
          </label>
        </ons-col>
        <ons-col style="flex: 0 0 70%;margin: auto;max-width: 100%;margin-bottom: 10px;">
          <label class="radio-button radio-button--material" style="margin-left: 30px;">
            <input type="radio" class="radio-button__input radio-button--material__input" name="r" checked="checked">
            <div class="radio-button__checkmark radio-button--material__checkmark"></div>
            ล้างอัดฉีดช่วงล้าง
          </label>
        </ons-col>
        <ons-col style="flex: 0 0 70%;margin: auto;max-width: 100%;margin-bottom: 10px;">
          <label class="radio-button radio-button--material" style="margin-left: 30px;">
            <input type="radio" class="radio-button__input radio-button--material__input" name="r" checked="checked">
            <div class="radio-button__checkmark radio-button--material__checkmark"></div>
            ล้างสีดูดฝุ่น
          </label>
        </ons-col>
        <ons-col style="flex: 0 0 70%;margin: auto;max-width: 100%;margin-bottom: 10px;">
          <label class="radio-button radio-button--material" style="margin-left: 30px;">
            <input type="radio" class="radio-button__input radio-button--material__input" name="r" checked="checked">
            <div class="radio-button__checkmark radio-button--material__checkmark"></div>
            ล้างยางมะตอย
          </label>
        </ons-col>
        <ons-col style="flex: 0 0 70%;margin: auto;max-width: 100%;margin-bottom: 10px;">
          <label class="radio-button radio-button--material" style="margin-left: 30px;">
            <input type="radio" class="radio-button__input radio-button--material__input" name="r" checked="checked">
            <div class="radio-button__checkmark radio-button--material__checkmark"></div>
            ถ่ายน้ำมันเครื่อง(มอเตอร์ไซต์)
          </label>
        </ons-col>

        <div class="warn">
          กรุณากรอกข้อมูลของท่านให้ครบถ้วน เพื่อประโยชน์ของตัวลูกค้าเอง
        </div>

        <!-- <ons-list-item tappable>
                <label class="left">
                  <ons-radio class="radio-fruit" input-id="radio-0" value="Apples"></ons-radio>
                </label>
                <label for="radio-0" class="center">Apples</label>
              </ons-list-item> -->

      </ons-row>

      <div class="setbtn">
        <ons-button onclick="insert()" id="btnsubmit">
          ยืนยัน
        </ons-button>
      </div>
    </ons-page>
  </template>

</body>

<script>
  function insert() {
    window.location.href = 'home.html';
  }



  window.fn = {};

  window.fn.toggleMenu = function () {
    document.getElementById('appSplitter').right.toggle();
  };

  window.fn.loadView = function (index) {
    document.getElementById('appTabbar').setActiveTab(index);
    document.getElementById('sidemenu').close();
  };

  // window.fn.loadLink = function (url) {
  //   window.open(url, '_blank');
  // };

  // window.fn.pushPage = function (page, anim) {
  //   if (anim) {
  //     document.getElementById('appNavigator').pushPage(page.id, { data: { title: page.title }, animation: anim });
  //   } else {
  //     document.getElementById('appNavigator').pushPage(page.id, { data: { title: page.title } });
  //   }
  // };

  //Showreload
  function showModal() {
    var modal = document.querySelector('ons-modal');
    modal.show();
    setTimeout(function () {
      // modal.hide();
      window.location.href = 'login.html';
    }, 1500);
  }

  // document.addEventListener('init', function (event) {
  //   var page = event.target;

  //   if (page.id === 'page1') {
  //     page.querySelector('#btndatabooking').onclick = function () {
  //     document.querySelector('#myNavigator').pushPage('select_type.html');
  //     };
  //   }
  // });


  // document.addEventListener('init', function (event) {
  //   var page = event.target;

  //   if (page.id === 'page1') {
  //     page.querySelector('#set2').onclick = function (event) {
  //       document.querySelector('#myNavigator').pushPage('detailState.html');
  //       // , { data: { title: 'Page 2' } });
  //     };
  //   }
  //   // else if (page.id === 'page2') {
  //   //   page.querySelector('ons-toolbar .center')
  //   //   // .innerHTML = page.data.title;
  //   // }
  // });

  function book() {
    axios.get('http://localhost:8080/user/showtimes')
      .then(function (response) {
        var dc = [];
        let data = response.data
        data.forEach(element => {
          dc += '<ons-list modifier="inset">' +
            '<ons-list-header>' + element.times + '</ons-list-header>' +
            '<ons-list-item>' +
            '<button class="button--cta" id="set2" onclick="" style="width: 100%; margin: 0 auto;">ว่าง</button>' +
            '</ons-list-item>' +
            '</ons-list><br>'

        })
        myobj = document.getElementById("data2");
        myobj.innerHTML = dc;
        

        console.log(myobj);

      })
      .catch(function (error) {
        // handle error
        console.log(error);
      })
  }


</script>

</html>